<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Origin Client - Animated Items Maker</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      color: white;
      background: url('file.png') no-repeat center center fixed;
      background-size: cover;
      backdrop-filter: blur(6px);
    }

    header {
      padding: 16px;
      text-align: center;
      font-size: 1.8em;
      font-weight: bold;
      text-shadow: 0 0 4px #000;
    }

    .container {
      padding: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    input[type="text"], input[type="file"] {
      padding: 6px 10px;
      background: rgba(0,0,0,0.4);
      border: none;
      border-radius: 6px;
      color: white;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
    }

    button {
      padding: 8px 12px;
      border: none;
      background: rgba(0,0,0,0.5);
      color: white;
      cursor: pointer;
      border-radius: 8px;
      font-weight: bold;
      box-shadow: 0 0 6px rgba(0,0,0,0.3);
    }

    .dropdown {
      background: rgba(0, 0, 0, 0.5);
      border-radius: 8px;
      width: 300px;
      box-shadow: 0 0 6px rgba(0,0,0,0.4);
      overflow: hidden;
    }

    .dropdown-header {
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }

    .dropdown-header span {
      font-weight: bold;
    }

    .dropdown-header button {
      background: rgba(255, 255, 255, 0.3);
      color: black;
      border-radius: 4px;
      font-weight: bold;
      padding: 0 8px;
      width: 24px;
      height: 24px;
      font-size: 14px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .dropdown-content {
      padding: 10px;
    }

    #preview {
      width: 64px;
      height: 64px;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <header>Origin Client - Animated Items Maker</header>
  <div class="container">
    <input id="packName" type="text" placeholder="Pack name (optional)">
    <input type="file" id="packIcon" accept="image/*"><img id="preview">

    <div>
      <button onclick="addDropdown('diamond_sword')">Add Diamond Sword</button>
      <button onclick="addDropdown('netherite_sword')">Add Netherite Sword</button>
      <button onclick="addDropdown('apple')">Add Apple</button>
      <button onclick="addDropdown('apple_golden')">Add Golden Apple</button>
    </div>

    <div id="dropdowns"></div>
    <button onclick="downloadZip()">Download</button>
  </div>

  <script>
    const attachables = {
      diamond_sword: `{ "attachable": { "description": { "identifier": "origin:diamond_sword" } } }`,
      netherite_sword: `{ "attachable": { "description": { "identifier": "origin:netherite_sword" } } }`,
      apple: `{ "attachable": { "description": { "identifier": "origin:apple" } } }`,
      apple_golden: `{ "attachable": { "description": { "identifier": "origin:apple_golden" } } }`,
    };

    const dropdownsContainer = document.getElementById('dropdowns');
    const packIconInput = document.getElementById('packIcon');
    const preview = document.getElementById('preview');
    let dropdownStates = [];

    packIconInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) preview.src = URL.createObjectURL(file);
    });

    function addDropdown(type) {
      if (dropdownStates.includes(type)) return;

      dropdownStates.push(type);
      const dropdown = document.createElement('div');
      dropdown.className = 'dropdown';
      dropdown.innerHTML = `
        <div class="dropdown-header" onclick="toggleDropdown(this)">
          <span>${type}</span>
          <button onclick="event.stopPropagation(); removeDropdown('${type}', this)">x</button>
        </div>
        <div class="dropdown-content">
          <p>Settings for ${type}</p>
        </div>
      `;
      dropdownsContainer.appendChild(dropdown);
    }

    function toggleDropdown(header) {
      const content = header.nextElementSibling;
      content.style.display = content.style.display === 'none' ? 'block' : 'none';
    }

    function removeDropdown(type, button) {
      dropdownStates = dropdownStates.filter(t => t !== type);
      const dropdown = button.closest('.dropdown');
      dropdown.remove();
    }

    function uuid() {
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
        const r = Math.random()*16|0, v = c==='x'?r:(r&0x3|0x8);
        return v.toString(16);
      });
    }

    async function downloadZip() {
      const zip = new JSZip();
      const nameInput = document.getElementById("packName").value.trim();
      const packName = nameInput || "origin client animated items";

      const manifest = {
        format_version: 2,
        header: {
          name: packName,
          description: "Created Using Origin's animated items maker",
          uuid: uuid(),
          version: [1,0,0],
          min_engine_version: [1,21,0],
          author: "Yami"
        },
        modules: [{
          type: "resources",
          uuid: uuid(),
          version: [1,0,0]
        }]
      };

      zip.file("manifest.json", JSON.stringify(manifest, null, 2));

      const attachableFolder = zip.folder("attachables");
      dropdownStates.forEach(type => {
        attachableFolder.file(`${type}.json`, attachables[type]);
      });

      if (packIconInput.files[0]) {
        zip.file("pack_icon.png", packIconInput.files[0]);
      }

      const blob = await zip.generateAsync({ type: "blob" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = (nameInput || "origin_animated_textures") + ".zip";
      a.click();
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
</body>
</html>
