<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ORIGIN CLIENT</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <style>
    /* Styles omitted for brevity (same as before) */
  </style>
</head>
<body>
  <header>
    <div class="main-title">ORIGIN CLIENT</div>
    <div class="sub-title">-animated items maker-</div>
  </header>

  <main>
    <div class="selector-container">
      <label for="itemSelector"><strong>Add your texture:</strong></label><br>
      <select id="itemSelector">
        <option value="none" selected disabled>Select an item</option>
        <option value="diamond_sword">diamond_sword</option>
        <option value="netherite_sword">netherite_sword</option>
        <option value="totem_of_undying">totem_of_undying</option>
        <option value="netherite_axe">netherite_axe</option>
        <option value="diamond_axe">diamond_axe</option>
        <option value="netherite_pickaxe">netherite_pickaxe</option>
        <option value="diamond_pickaxe">diamond_pickaxe</option>
      </select>
    </div>

    <div style="margin-bottom: 20px;">
      <label for="packName"><strong>Pack Name:</strong></label><br>
      <input type="text" id="packName" placeholder="Enter pack name..." style="padding: 8px; width: 300px;">
    </div>

    <div id="itemsContainer"></div>

    <button id="downloadAll">Download All</button>
    <div id="toast" class="toast">
      <span id="toastMessage"></span>
      <button id="closeToast">Ã—</button>
    </div>
  </main>

  <div class="dialog-overlay" id="confirmDialog">
    <div class="dialog-box">
      <p>Are you sure?</p>
      <button class="btn-yes" id="confirmYes">Yes</button>
      <button class="btn-no" id="confirmNo">No</button>
    </div>
  </div>

  <script>
    const itemCodes = {
      diamond_sword: 'ds',
      netherite_sword: 'ns',
      totem_of_undying: 't',
      netherite_axe: 'na',
      diamond_axe: 'da',
      netherite_pickaxe: 'np',
      diamond_pickaxe: 'dp'
    };

    document.getElementById('downloadAll').addEventListener('click', async () => {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');
      toast.style.display = 'none';
      toastMessage.textContent = '';

      const packName = document.getElementById('packName').value.trim();
      if (!packName) {
        toastMessage.textContent = 'Error: Please enter a pack name';
        toast.style.display = 'block';
        return;
      }

      if (createdItems.size === 0) {
        toastMessage.textContent = 'Error: file_empty';
        toast.style.display = 'block';
        return;
      }

      const zip = new JSZip();
      let hasError = false;
      let errorMessages = [];

      for (let item of createdItems) {
        const code = itemCodes[item];
        const folder = zip.folder('textures').folder(item);
        for (let i = 1; i <= 10; i++) {
          const input = document.getElementById(`${item}_frame_${i}`);
          if (input && input.files.length) {
            const file = input.files[0];
            const fileData = await file.arrayBuffer();
            folder.file(`${code}${i}.png`, fileData);
          } else {
            hasError = true;
            errorMessages.push(`Error: ${item} - frame_${i} texture not available`);
          }
        }
      }

      if (hasError) {
        toastMessage.textContent = errorMessages.join('\n');
        toast.style.display = 'block';
        return;
      }

      zip.generateAsync({ type: 'blob' }).then(content => {
        saveAs(content, `${packName}.mcpack`);
      });
    });

    document.getElementById('closeToast').addEventListener('click', () => {
      document.getElementById('toast').style.display = 'none';
    });
  </script>
</body>
</html>
